[tools]
rust = { version = "1.93", profile = "default" }
uv = "latest"
"aqua:sharkdp/hyperfine" = "latest"
hk = "latest"
pkl = "latest"


[tasks.fmt]
run = "cargo fmt --all -- --check"
description = "Check formatting"

[tasks.lint]
run = "cargo clippy --workspace --all-targets --all-features -- -D warnings"
description = "Run clippy (strict)"

[tasks.test]
run = "cargo test --workspace"
description = "Run tests"

[tasks.check]
run = "cargo check --workspace --all-targets"
description = "Type check"

[tasks.ci]
depends = ["fmt", "check", "lint", "test"]
description = "Run all CI checks"

[tasks.compat]
run = "uv run --group test pytest tests/umi_tools_compat -v"
description = "Run umi-tools compatibility tests"
depends = ["check"]

[tasks.bench-setup]
run = "bash benchmarks/setup.sh"
description = "Download benchmark data"

[tasks.bench]
run = "bash benchmarks/run.sh"
depends = ["bench-setup"]
description = "Run extract benchmarks"
